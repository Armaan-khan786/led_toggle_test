name: ESP32 LED Toggle CI

on:
  push:
    branches:
      - main
  pull_request:

jobs:
  build:
    runs-on: windows-latest

    steps:
      # 1️⃣ Checkout your repository
      - name: Checkout repository
        uses: actions/checkout@v4

      # 2️⃣ Set up Arduino CLI
      - name: Setup Arduino CLI
        run: |
          choco install arduino-cli --no-progress -y
          arduino-cli config init
          arduino-cli core update-index
          arduino-cli core install esp32:esp32

      # 3️⃣ Build sender.ino
      - name: Build Sender Sketch
        run: |
          arduino-cli compile --fqbn esp32:esp32:esp32 sender/sender.ino

      # 4️⃣ Build receiver.ino
      - name: Build Receiver Sketch
        run: |
          arduino-cli compile --fqbn esp32:esp32:esp32 receiver/receiver.ino
